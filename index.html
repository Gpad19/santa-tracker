<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Santa Tracker ðŸŽ…</title>

  <!-- iPad / Mobile support -->
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <!-- Cesium -->
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.115/Build/Cesium/Cesium.js"></script>
  <link
    href="https://cesium.com/downloads/cesiumjs/releases/1.115/Build/Cesium/Widgets/widgets.css"
    rel="stylesheet"
  />

  <style>
    html, body, #cesiumContainer {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    #infoPanel {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.65);
      color: white;
      padding: 10px 14px;
      border-radius: 8px;
      font-family: system-ui, -apple-system;
      font-size: 14px;
      z-index: 10;
    }
  </style>
</head>
<body>

<div id="cesiumContainer"></div>

<div id="infoPanel">
  ðŸŽ… Santa Tracker<br />
  Status: Delivering gifts
</div>

<script>
  // ================================
  // ðŸ”‘ REQUIRED: Cesium ion Access Token
  // ================================
  Cesium.Ion.defaultAccessToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiZjEyOGQ2Mi1jMGUwLTRhNmMtYThhZi1lYTcyMzAwYWFiMDYiLCJpZCI6MTIxODQ5LCJpYXQiOjE2NzQxNjE4MDh9.-_OgfjufhglZ0BdQkgwdlNqABiJNfe61EzpscAFljBE";

  // Viewer setup
  const viewer = new Cesium.Viewer("cesiumContainer", {
    animation: false,
    timeline: false,
    baseLayerPicker: false,
    geocoder: false,
    homeButton: false,
    sceneModePicker: false,
    navigationHelpButton: false,
    fullscreenButton: false,
    infoBox: false,
    selectionIndicator: false,
    shouldAnimate: true
  });

  // Improve appearance & iPad performance
  viewer.scene.globe.enableLighting = true;
  viewer.scene.requestRenderMode = true;
  viewer.scene.maximumRenderTimeChange = Infinity;

  // Santa route (lon, lat)
  const route = [
    [-135, 90],   // North Pole
    [-100, 60],
    [-75, 40],
    [-40, 30],
    [0, 20],
    [40, 10],
    [80, 25],
    [120, 35]
  ];

  const start = Cesium.JulianDate.now();
  const stop = Cesium.JulianDate.addSeconds(
    start,
    route.length * 6,
    new Cesium.JulianDate()
  );

  viewer.clock.startTime = start.clone();
  viewer.clock.stopTime = stop.clone();
  viewer.clock.currentTime = start.clone();
  viewer.clock.multiplier = 1;
  viewer.clock.shouldAnimate = true;

  const position = new Cesium.SampledPositionProperty();

  route.forEach((coord, index) => {
    const time = Cesium.JulianDate.addSeconds(
      start,
      index * 6,
      new Cesium.JulianDate()
    );

    position.addSample(
      time,
      Cesium.Cartesian3.fromDegrees(coord[0], coord[1], 300000)
    );
  });

  const santa = viewer.entities.add({
    availability: new Cesium.TimeIntervalCollection([
      new Cesium.TimeInterval({ start, stop })
    ]),
    position: position,
    orientation: new Cesium.VelocityOrientationProperty(position),
    model: {
      uri: "https://cdn.jsdelivr.net/gh/AnalyticalGraphicsInc/cesium-assets@master/models/CesiumMan/Cesium_Man.glb",
      minimumPixelSize: 64
    },
    path: {
      width: 3,
      material: Cesium.Color.RED
    }
  });

  viewer.trackedEntity = santa;

  viewer.camera.flyTo({
    destination: Cesium.Cartesian3.fromDegrees(-135, 80, 2_500_000)
  });
</script>

</body>
</html>

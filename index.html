<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Santa Tracker ðŸŽ…</title>

  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <!-- Cesium -->
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.115/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.115/Build/Cesium/Widgets/widgets.css"
        rel="stylesheet" />

  <style>
    html, body, #cesiumContainer {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
    }

    #info {
      position: absolute;
      top: 12px;
      left: 12px;
      background: rgba(0, 0, 0, 0.65);
      color: white;
      padding: 14px 18px;
      border-radius: 12px;
      font-family: system-ui, -apple-system;
      font-size: 14px;
      z-index: 10;
      min-width: 240px;
      line-height: 1.5;
    }

    #zoomSanta {
      position: absolute;
      top: 140px;
      left: 12px;
      padding: 10px 14px;
      border-radius: 10px;
      border: none;
      background: rgba(255, 0, 0, 0.85);
      color: white;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      z-index: 10;
    }

    #zoomSanta:hover {
      background: rgba(255, 0, 0, 1);
    }
  </style>
</head>

<body>

<div id="cesiumContainer"></div>
<div id="info">ðŸŽ… Preparing for departureâ€¦</div>
<button id="zoomSanta">ðŸŽ… Zoom to Santa</button>

<script>
/* =====================================
   ðŸ”‘ Cesium ion token
===================================== */
Cesium.Ion.defaultAccessToken =
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiZjEyOGQ2Mi1jMGUwLTRhNmMtYThhZi1lYTcyMzAwYWFiMDYiLCJpZCI6MTIxODQ5LCJpYXQiOjE2NzQxNjE4MDh9.-_OgfjufhglZ0BdQkgwdlNqABiJNfe61EzpscAFljBE";

/* =====================================
   ðŸŒ Viewer
===================================== */
const viewer = new Cesium.Viewer("cesiumContainer", {
  animation: true,
  timeline: true,
  shouldAnimate: true
});

/* ðŸŒž BRIGHT EARTH SETTINGS */
viewer.scene.globe.enableLighting = false;
viewer.scene.skyAtmosphere.brightnessShift = 0.4;
viewer.scene.skyAtmosphere.hueShift = 0.0;
viewer.scene.skyAtmosphere.saturationShift = 0.1;

/* =====================================
   â° Timeline
===================================== */
const santaStart = Cesium.JulianDate.fromIso8601("2026-12-24T11:00:00Z");
const santaEnd   = Cesium.JulianDate.fromIso8601("2026-12-24T15:34:00Z");

/* =====================================
   ðŸ™ Cities
===================================== */
const cities = [
  { name: "North Pole, Arctic", lon: -135, lat: 90, stop: 0 },
  { name: "Uelen, Russia", lon: -169.8098, lat: 66.1597, stop: 0 },
  { name: "Lavrentiya, Russia", lon: -171.0, lat: 65.5833, stop: 0 },
  { name: "Anadyr, Russia", lon: 177.5167, lat: 64.7333, stop: 0 },
  { name: "Magadan, Russia", lon: 150.8, lat: 59.5667, stop: 0 },
  { name: "Esso, Russia", lon: 158.7, lat: 55.9333, stop: 0 },
  { name: "Wake Island", lon: 166.647, lat: 19.282, stop: 0 },
  { name: "Majuro", lon: 171.38, lat: 7.09, stop: 0 },
  { name: "Yaren, Nauru", lon: 166.93, lat: -0.55, stop: 0 },
  { name: "Tarawa", lon: 172.98, lat: 1.45, stop: 0 },
  { name: "Funafuti", lon: 179.2, lat: -8.52, stop: 0 },
  { name: "Taga, Samoa", lon: -172.5, lat: -13.5, stop: 0 },
  { name: "Tongatapu", lon: -175.2, lat: -21.13, stop: 0 },
  { name: "Auckland", lon: 174.76, lat: -36.85, stop: 0 },
  { name: "Gisborne", lon: 178.017, lat: -38.662, stop: 0 },
  { name: "Christchurch", lon: 172.6362, lat: -43.5321, stop: 0 },
  { name: "Chatham Islands", lon: -176.55, lat: -43.95, stop: 0 },
  { name: "McMurdo Station", lon: 166.668, lat: -77.8419, stop: 0 },
  { name: "Wellington", lon: 174.78, lat: -41.29, stop: 0 },
  { name: "Queenstown", lon: 168.6626, lat: -45.0312, stop: 0 },
  { name: "Suva", lon: 178.4501, lat: -18.1416, stop: 0 },
  { name: "Noumea", lon: 166.458, lat: -22.2758, stop: 0 },
  { name: "Port Vila, Vanuatu", lon: 168.3273, lat: -17.7333, stop: 0 },
  { name: "Honiara", lon: 159.9729, lat: -9.4456, stop: 0 },
  { name: "Auki", lon: 160.6833, lat: -8.767, stop: 0 },
  { name: "Palikir", lon: 158.161, lat: 6.9178, stop: 0 },
  { name: "Return to North Pole", lon: -135, lat: 90, stop: 0 }
];

/* =====================================
   ðŸ§® Timing
===================================== */
const totalSeconds =
  Cesium.JulianDate.secondsDifference(santaEnd, santaStart);

const travelPerLeg =
  totalSeconds / (cities.length - 1);

/* =====================================
   ðŸ“ Movement path
===================================== */
const position = new Cesium.SampledPositionProperty();
let t = santaStart.clone();
const arcSamples = 96;

cities.forEach((city, i) => {
  city.arrival = t.clone();
  const p = Cesium.Cartesian3.fromDegrees(city.lon, city.lat, 80000);
  position.addSample(city.arrival, p);

  if (i < cities.length - 1) {
    const next = cities[i + 1];
    const geo = new Cesium.EllipsoidGeodesic(
      Cesium.Cartographic.fromDegrees(city.lon, city.lat),
      Cesium.Cartographic.fromDegrees(next.lon, next.lat)
    );

    for (let j = 1; j <= arcSamples; j++) {
      const f = j / arcSamples;
      const c = geo.interpolateUsingFraction(f);
      const h = 80000 + Math.sin(Math.PI * f) * 30000;

      const tt = Cesium.JulianDate.addSeconds(
        city.arrival,
        travelPerLeg * f,
        new Cesium.JulianDate()
      );

      position.addSample(
        tt,
        Cesium.Cartesian3.fromRadians(c.longitude, c.latitude, h)
      );
    }

    t = Cesium.JulianDate.addSeconds(t, travelPerLeg, new Cesium.JulianDate());
  }
});

/* =====================================
   ðŸŽ… Santa entity
===================================== */
const santa = viewer.entities.add({
  availability: new Cesium.TimeIntervalCollection([
    new Cesium.TimeInterval({ start: santaStart, stop: santaEnd })
  ]),
  position,
  point: {
    pixelSize: 12,
    color: Cesium.Color.RED,
    outlineColor: Cesium.Color.WHITE,
    outlineWidth: 2
  }
});

viewer.trackedEntity = santa;

/* =====================================
   ðŸŽ¥ Zoom button
===================================== */
document.getElementById("zoomSanta").onclick = () => {
  viewer.trackedEntity = santa;
};

/* =====================================
   ðŸŽ¥ Initial camera
===================================== */
viewer.camera.flyTo({
  destination: Cesium.Cartesian3.fromDegrees(-135, 80, 3_000_000)
});
</script>

</body>
</html>

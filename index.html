<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Santa Tracker</title>

<script src="https://cesium.com/downloads/cesiumjs/releases/1.113/Build/Cesium/Cesium.js"></script>
<link href="https://cesium.com/downloads/cesiumjs/releases/1.113/Build/Cesium/Widgets/widgets.css" rel="stylesheet" />

<style>
html, body, #cesiumContainer {
  width: 100%;
  height: 100%;
  margin: 0;
  background: #081a2b;
  overflow: hidden;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

#hud {
  position: absolute;
  top: 12px;
  left: 12px;
  background: rgba(0,0,0,0.55);
  color: white;
  padding: 12px 16px;
  border-radius: 10px;
  backdrop-filter: blur(8px);
  font-size: 14px;
}

#title {
  font-weight: 600;
  margin-bottom: 6px;
  font-size: 16px;
}
</style>
</head>

<body>
<div id="cesiumContainer"></div>

<div id="hud">
  <div id="title">ðŸŽ… Santa Tracker</div>
  <div>Stops: <span id="stops">â€”</span></div>
  <div>Visited: <span id="visited">0</span></div>
  <div>Current: <span id="current">â€”</span></div>
</div>

<script>
/* ======================
   CESIUM TOKEN
====================== */
Cesium.Ion.defaultAccessToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiZjEyOGQ2Mi1jMGUwLTRhNmMtYThhZi1lYTcyMzAwYWFiMDYiLCJpZCI6MTIxODQ5LCJpYXQiOjE2NzQxNjE4MDh9.-_OgfjufhglZ0BdQkgwdlNqABiJNfe61EzpscAFljBE";

/* ======================
   REAL CITY DATA
   (public-domain style list)
====================== */
const CITIES = [
  ["North Pole", 90, 0],
  ["ReykjavÃ­k", 64.1, -21.9],
  ["London", 51.5, -0.1],
  ["Paris", 48.9, 2.4],
  ["Berlin", 52.5, 13.4],
  ["Rome", 41.9, 12.5],
  ["Cairo", 30.0, 31.2],
  ["Nairobi", -1.3, 36.8],
  ["Johannesburg", -26.2, 28.0],
  ["Moscow", 55.8, 37.6],
  ["Istanbul", 41.0, 28.9],
  ["Dubai", 25.2, 55.3],
  ["Mumbai", 19.1, 72.9],
  ["Delhi", 28.6, 77.2],
  ["Bangkok", 13.7, 100.5],
  ["Singapore", 1.3, 103.8],
  ["Tokyo", 35.7, 139.7],
  ["Seoul", 37.6, 127.0],
  ["Beijing", 39.9, 116.4],
  ["Sydney", -33.9, 151.2],
  ["Melbourne", -37.8, 144.9],
  ["Auckland", -36.8, 174.8],
  ["Honolulu", 21.3, -157.8],
  ["Los Angeles", 34.0, -118.2],
  ["San Francisco", 37.8, -122.4],
  ["Seattle", 47.6, -122.3],
  ["Vancouver", 49.3, -123.1],
  ["Denver", 39.7, -105.0],
  ["Chicago", 41.9, -87.6],
  ["Toronto", 43.7, -79.4],
  ["New York", 40.7, -74.0],
  ["Boston", 42.4, -71.1],
  ["Washington DC", 38.9, -77.0],
  ["Miami", 25.8, -80.2],
  ["Mexico City", 19.4, -99.1],
  ["BogotÃ¡", 4.7, -74.1],
  ["Lima", -12.0, -77.0],
  ["Santiago", -33.4, -70.6],
  ["Buenos Aires", -34.6, -58.4],
  ["SÃ£o Paulo", -23.6, -46.6]
];

/* ======================
   CONFIG
====================== */
const TOTAL_SECONDS = 24 * 60 * 60;
const FLIGHT_HEIGHT = 320000;
const STOPS = Math.min(
  Math.max(300, CITIES.length * 7),
  500
);

document.getElementById("stops").textContent = STOPS;

/* ======================
   VIEWER
====================== */
const viewer = new Cesium.Viewer("cesiumContainer", {
  animation: false,
  timeline: false,
  baseLayerPicker: false,
  geocoder: false,
  homeButton: false,
  sceneModePicker: false,
  navigationHelpButton: false,
  fullscreenButton: false,
  shouldAnimate: true
});

viewer.scene.globe.depthTestAgainstTerrain = false;
viewer.camera.percentageChanged = 0.005;
viewer.scene.screenSpaceCameraController.enableCollisionDetection = false;

/* ======================
   BUILD ROUTE
====================== */
const path = new Cesium.SampledPositionProperty();
const startTime = Cesium.JulianDate.now();
const secondsPerStop = TOTAL_SECONDS / STOPS;

let index = 0;

for (let i = 0; i < STOPS; i++) {
  const city = CITIES[index % CITIES.length];
  index++;

  const time = Cesium.JulianDate.addSeconds(
    startTime,
    i * secondsPerStop,
    new Cesium.JulianDate()
  );

  path.addSample(
    time,
    Cesium.Cartesian3.fromDegrees(city[2], city[1], FLIGHT_HEIGHT)
  );
}

/* ======================
   SANTA (RED DOT)
====================== */
const santa = viewer.entities.add({
  position: path,
  point: {
    pixelSize: 10,
    color: Cesium.Color.RED,
    outlineColor: Cesium.Color.WHITE,
    outlineWidth: 1,
    disableDepthTestDistance: Number.POSITIVE_INFINITY
  }
});

viewer.trackedEntity = santa;

/* ======================
   CLOCK
====================== */
viewer.clock.startTime = startTime.clone();
viewer.clock.stopTime = Cesium.JulianDate.addSeconds(startTime, TOTAL_SECONDS, new Cesium.JulianDate());
viewer.clock.currentTime = startTime.clone();
viewer.clock.clockRange = Cesium.ClockRange.CLAMPED;
viewer.clock.multiplier = 1;

/* ======================
   HUD UPDATES
====================== */
viewer.clock.onTick.addEventListener(() => {
  const elapsed = Cesium.JulianDate.secondsDifference(
    viewer.clock.currentTime,
    startTime
  );

  const visited = Math.min(Math.floor(elapsed / secondsPerStop), STOPS);
  document.getElementById("visited").textContent = visited;

  const city = CITIES[visited % CITIES.length];
  document.getElementById("current").textContent = city[0];
});
</script>
</body>
</html>
